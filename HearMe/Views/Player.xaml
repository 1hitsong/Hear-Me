<Window x:Class="HearMe.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Platform"
        xmlns:local="clr-namespace:HearMe"
        mc:Ignorable="d"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="White"
        BorderBrush="LightGray" BorderThickness="1"
        Title="Hear Me" Height="400" Width="300">
    <Canvas Background="#202020" AllowDrop="True">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Drop">
                <cmd:EventToCommand Command="{Binding DropCommand}" PassEventArgsToCommand="True" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <Canvas Background="#ffffff" Name="canvasPlaylist" Canvas.Left="-300" Canvas.Top="0" Height="400" Width="300" Panel.ZIndex="10">
            <Canvas.RenderTransform>
                <TranslateTransform x:Name="slideToggle"/>
            </Canvas.RenderTransform>
            <ListBox AlternationCount="2" BorderThickness="0" x:Name="playlist" SelectionMode="Multiple" SelectedValuePath="Filename" ItemsSource="{Binding Playlist.Files}" HorizontalAlignment="Left" Height="350" VerticalAlignment="Top" Width="272" Canvas.Left="15" Canvas.Top="15">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="KeyDown">
                        <cmd:EventToCommand Command="{Binding DeleteSelectedCommand}" PassEventArgsToCommand="True" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Grid.ColumnSpan="3" Orientation="Horizontal">
                            <Label Content="{Binding AlbumArtist}" />
                            <Label>-</Label>
                            <Label Content="{Binding Title}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <EventSetter Event="MouseDoubleClick" Handler="PlaySongFromPlaylist" />
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
            <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" x:Name="openPlaylist" Command="{Binding OpenPlaylistCommand}" Content="Open" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="#202020" Height="25" Canvas.Left="15" Canvas.Top="370"/>
            <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" x:Name="clearPlaylist" Content="Clear" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="#202020" Height="25" Command="{Binding ClearPlaylistCommand}" Canvas.Left="245" Canvas.Top="370"/>
            <Button BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Content="X" Width="20" Height="20" HorizontalAlignment="Left" Click="HidePlaylist" Margin="278,0,0,378" FontFamily="Segoe UI Light" Foreground="#202020" />
            <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" x:Name="savePlaylist" Content="Save" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="#202020" Height="25" Command="{Binding SavePlaylistCommand}" Canvas.Left="65" Canvas.Top="370"/>
        </Canvas>
        <Canvas Name="canvasPlayer">
            <Button Click="ShowPlaylist" Style="{DynamicResource FlatButtonStyle}" x:Name="button" Content="PL" Width="30" Canvas.Left="10" Canvas.Top="24"/>
            <Image x:Name="cover" Source="{Binding AlbumArt}" HorizontalAlignment="Left" Height="207" VerticalAlignment="Top" Width="207" Canvas.Left="45" Canvas.Top="45"/>
            <Button BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Content="X" Width="20" Height="20" HorizontalAlignment="Left" Click="Window_Close" Margin="278,0,0,378" FontFamily="Segoe UI Light" Foreground="#f7f7f7" Panel.ZIndex="5" />
            <Button Style="{DynamicResource FlatButtonStyle}" x:Name="previousButton" Command="{Binding PreviousCommand}" Content="&lt;&lt;" HorizontalAlignment="Left" VerticalAlignment="Top" Width="25" Canvas.Left="20" Canvas.Top="340"/>
            <Button Style="{DynamicResource FlatButtonStyle}" x:Name="stopButton" Command="{Binding StopCommand}" Content="&#9724;" HorizontalAlignment="Left" VerticalAlignment="Top" Width="75" Canvas.Left="160" Canvas.Top="340"/>
            <Button Style="{DynamicResource FlatButtonStyle}" x:Name="playButton" Command="{Binding PlayCommand}" Content="&gt;" HorizontalAlignment="Left" VerticalAlignment="Top" Width="75" Canvas.Left="60" Canvas.Top="340"/>
            <Button Style="{DynamicResource FlatButtonStyle}" x:Name="nextButton" Command="{Binding NextCommand}" Content="&gt;&gt;" HorizontalAlignment="Left" VerticalAlignment="Top" Width="25" Canvas.Left="250" Canvas.Top="340"/>
            <Slider x:Name="seekBar" Value="{Binding PlayingSongPosition}" HorizontalAlignment="Left" Minimum="0" Maximum="{Binding PlayingSongLength}" VerticalAlignment="Top" Width="170" Canvas.Left="10" Canvas.Top="292"/>
            <Slider x:Name="volumeBar" HorizontalAlignment="Left" VerticalAlignment="Top" Width="80" Canvas.Left="202" Canvas.Top="292" Value="{Binding Volume, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}" Maximum="1" LargeChange="0.1"/>
            <Label x:Name="songTime"  Content="{Binding DisplayText}" HorizontalAlignment="right" VerticalAlignment="Top" Foreground="White" Canvas.Top="312" Canvas.Left="150"/>
            <Label x:Name="songTitle" Content="{Binding PlayingSongTitle}" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20,250,0,0" Foreground="White"/>
            <Rectangle Fill="Azure" Height="20" Width="155" MouseDown="Window_MouseDown" Panel.ZIndex="1" Canvas.Left="80"/>
            <Label x:Name="KeyDownHelper" Foreground="White" Content="{Binding KeyValue}" Canvas.Left="45" Canvas.Top="25"/>
        </Canvas>
    </Canvas>

    <Window.Resources>
        <Style TargetType="Button" x:Key="FlatButtonStyle">
            <Setter Property="Background" Value="DarkCyan"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="25"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border BorderThickness="0" Background="{TemplateBinding Background}" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ZebraStripe" TargetType="{x:Type ListBoxItem}">
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Background" Value="#e7e7e7"></Setter>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#c7c7c7"></Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
</Window>
